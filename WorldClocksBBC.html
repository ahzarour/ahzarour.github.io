<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>World Clocks ‚Äî Responsive</title>
    <!-- Fonts for a professional digital look -->
    <link
      href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@600;800&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <style>

    /* notes for me
    ----------------------
    align-content: center;  \\make the content in the middle horizantally
    justify-items: center;  \\align the content center vertically
    */

        /* Digital Pro Theme */
        :root {
        --bbc-red: #bb1919;
        --bbc-red-dark: #a21616;
        --bbc-grey: #333333;
        --bbc-text: #111111;
        --bbc-muted: #666666;
        --bbc-light: #f2f2f2;
        --bbc-bg: #ffffff;
        --bbc-panel: #fafafa;
        --bbc-border: rgba(0, 0, 0, 0.08);
        }

        /* General page styling */
        body,
        html {
          font-family: "Reith Sans", "Helvetica Neue", Arial, sans-serif, 'Digital-7', 'Orbitron';
          display: flex;
          flex-direction: column;
          height: 100%;
          color: var(--text);
          box-sizing: border-box;
          margin: 0;
          padding: 15px;


      /* background */
      background-color: var(--bbc-muted);
      background-image: linear-gradient(
          180deg,
          var(--bbc-light),
          rgb(194, 194, 194)
        );
        }

        section {
          display: flex;
          flex: 1;
          max-width: 900px;
          width: 100%;
          align-self: center;
          align-items: center;
          justify-content: center;
          min-height: 0;
          /* Safari flex sizing fix */
        }

        section:nth-child(3) {
               flex: 2;
             }

        section:nth-child(4) {
               flex: 4;
             }


        .bbc-logo {
            display: flex;
            gap: 12px; /* Adjust the spacing between the boxes if needed */
          }

          .bbc-letter {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 40px; /* Adjust the size of the squares */
            height: 40px; /* Adjust the size of the squares */
            background-color: var(--bbc-red-dark);
            color: var(--bbc-light);
            font-family: sans-serif; /* BBC uses a custom font, but sans-serif is a good general substitute */
            font-weight: bold; /* Make the letters bold */
            font-size: 24px; /* Adjust the letter size */
          }

        .sub-logo{
          font-size: clamp(12px, 3.2vw, 28px);
          font-weight: 300;
          letter-spacing: 3px;
          margin-top: 8px;
          color: var(--bbc-text);
          text-shadow: 0 0 8px rgba(77, 76, 76, 0.127);
          text-transform: uppercase;
        }

        .grid-container,
        .section-Container {
          width: 100%;
          max-width: 900px;
          border-radius: 12px;
          overflow: hidden;
          margin-bottom: 20px;
        }

        .section-Container {
          display: flex;
          flex-direction: column;
          align-items: center;
          /* center children horizontally */
          justify-content: center;
          /* center children vertically */
          min-height: 0;
          /* Safari flex sizing fix */

        }

        .grid-container {
          display: grid;
          grid-template-columns: 1.6fr 1.2fr;
          /* Digital panel styling */
          background-color: var(--bbc-red-dark);
          border: 1px solid var(--bbc-panel);
          border-radius: 12px;
          box-shadow: 0 14px 36px rgba(0, 0, 0, 0.32),
          transition: background 160ms ease, box-shadow 160ms ease, transform 120ms ease;
        }

        /* .grid-container:hover {
          background: var(--panel-hover);
          border-color: var(--border-strong);
          box-shadow: 0 14px 36px rgba(0, 0, 0, 0.32), inset 0 1px 0 rgba(255, 255, 255, 0.08);
        } */



        /* Wrapper that distributes available vertical space to its children */
        .fit-screen-hight {
          display: flex;
          flex-direction: column;
          gap: 12px;
          flex: 1 1 px;
          align-self: stretch;
          min-height: 0;
          height: auto;
          width: 100%;
          white-space: nowrap;
        }

        /* Each row (grid-container) grows evenly to fill the wrapper */
        .fit-screen-hight > .grid-container {
          flex: 1;
          margin-bottom: 0;
          min-height: 0;
        }

        .grid-cell {
          padding: 12px 14px;
          display: flex;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          white-space: nowrap;
          /* min-height: 64px; */
        }

        .grid-cell-left {
          justify-content: left;
          color: var(--bbc-light);
          font-size: clamp(16px, 4.5vw, 42px);
          font-weight: 700;
          /* letter-spacing: 0.08em; */
        }

        .grid-cell-longText {
          /* font-size: clamp(12px, 4cqi, 52px); */
        }

        .grid-cell-right {
          justify-content: right;
        }

        .grid-cell-mid {
          justify-content: center;
        }

        .logo-font {
          font-size: clamp(20px, 5vw, 40px);
          font-weight: 800;
          letter-spacing: 0.18vw;
          color: white;
          background: var(--bbc-red);
          padding: 8px 16px;
          border-radius: 4px;
          box-shadow: 0 4px 16px rgba(187, 25, 25, 0.35);
        }

        .local-date {
          font-size: clamp(18px, 3.8vw, 34px);
          font-weight: 800;
          letter-spacing: 1px;
          color: var(--bbc-red);
          text-shadow: 0 0 10px rgba(84, 23, 23, 0.25);
          text-transform: uppercase;
        }

        .container-logo {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 5px;
        }

        .grid-cell-mid {
          font-size: clamp(12px, 3.6vw, 24px);
          font-variant-numeric: tabular-nums;
          font-feature-settings: "tnum" 1;
          color: var(--muted);
        }

        .grid-cell-right {
          font-size: clamp(20px, 7vw, 60px);
          color: var(--bbc-red);
          text-shadow: #bb191924 1px 0 5px;
          font-weight: 800;
          letter-spacing: 2px;
          color: var(--bbc-light);
        }

    /* ==================== Flipboard Calendar ==================== */
    .flipBoard-Calender {
      width: 100% ;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      text-transform: uppercase;
      perspective: 800px;
    }

    .date-part {
      position: relative;
      background: #111;
      color: #fff;
      font-size: clamp(1.5cqi, 4.5cqi, 52px);
      font-weight: 800;
      letter-spacing: 2px;
      padding: clamp(1.5cqi, 2.5cqi, 24px) clamp(1vw, 1.5cqi, 28px);
      border-radius: 10px;
      box-shadow: inset 0 -2px 0 #000, 0 4px 12px rgba(0, 0, 0, 0.6);
      border: 1px solid #222;
      overflow: hidden;
      text-align: center;
      width: auto;
      /* min-width: 110px; */
      transition: transform 0.3s ease-in-out;
    }

    /* Split line across the middle */
    .date-part::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 1.5px;
      background: #222;
      transform: translateY(-50%);
      box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06);
    }

    /* Subtle light reflection */
    .date-part::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(0,0,0,0.3));
      pointer-events: none;
    }

    /* Flip animation keyframes */
    @keyframes flipDown {
      0% {
        transform: rotateX(0deg);
      }
      45% {
        transform: rotateX(-90deg);
      }
      55% {
        transform: rotateX(90deg);
      }
      100% {
        transform: rotateX(0deg);
      }
    }

    /* Class added temporarily for the flip effect */
    .flip {
      animation: flipDown 0.6s ease-in-out;
      transform-origin: center;
      backface-visibility: hidden;
    }

    /* ==================== Weather Section ==================== */
    .weather-container {
      width: 100%;
      max-width: 900px;
      background-color: var(--bbc-red-dark);
      border: 1px solid var(--bbc-panel);
      border-radius: 12px;
      box-shadow: 0 14px 36px rgba(0, 0, 0, 0.32);
      padding: 16px 20px;
      box-sizing: border-box;
      color: var(--bbc-light);
    }

    .weather-current {
      display: flex;
      align-items: center;
      gap: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
      margin-bottom: 12px;
    }

    .weather-current-icon {
      font-size: clamp(40px, 8vw, 64px);
    }

    .weather-current-details {
      display: flex;
      flex-direction: column;
    }

    .weather-current-temp {
      font-size: clamp(28px, 6vw, 48px);
      font-weight: 700;
      line-height: 1;
    }

    .weather-current-desc {
      font-size: clamp(14px, 2.5vw, 18px);
      color: rgba(255, 255, 255, 0.8);
      text-transform: capitalize;
    }

    .weather-forecast {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      text-align: center;
    }

    .forecast-day {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      font-size: clamp(11px, 2vw, 14px);
    }

    .forecast-day-name {
      font-weight: 600;
    }

    .forecast-icon {
      font-size: clamp(24px, 4vw, 32px);
    }

    .forecast-temps {
      color: rgba(255, 255, 255, 0.8);
    }



        /* ----------- this part is for the different screen size setups ------------ */

        /* Fluid font sizing for small screens */
        @media (max-width: 600px) {
          /* body { font-size: clamp(0.5em, 6vw, 36px); } */
          /* .grid-cell {font-size: clamp(12px, 2vw, 60px);} */
          .grid-cell-right {font-size: clamp(12px, 6vw, 60px);}
          .grid-cell-left {font-size: clamp(12px, 4.5vw, 60px);}
        }



            @media (max-width: 375px) {
          /* body { font-size: clamp(0.5em, 6vw, 36px); } */
          /* .grid-cell {font-size: clamp(12px, 2vw, 60px);} */
          .grid-cell-right {font-size: clamp(12px, 6vw, 20px);}
          .grid-cell-left {font-size: clamp(12px, 4.5vw, 60px);}
        }

        /* Reduce motion for users that prefer it */
        @media (prefers-reduced-motion: reduce) {
          * { transition: none !important; }
        }
  </style>

  <body>
    <section>
      <div class="container-logo">
      <div class="bbc-logo">
        <span class="bbc-letter">B</span>
        <span class="bbc-letter">B</span>
        <span class="bbc-letter">C</span>
      </div>
      <!-- <div class="logo-font">NEWS</div> -->
      <div class="sub-logo">Washington DC</div>
    </section>
    <section>
      <div class="flipBoard-Calender">
        <div class="date-part" id="cal-weekday"></div>
        <div class="date-part" id="cal-month"></div>
        <div class="date-part" id="cal-day"></div>
        <div class="date-part" id="cal-year"></div>
      </div>
    </section>
    <section>
      <div class="weather-container" id="weather-container">
        <div class="weather-current">
          <div class="weather-current-icon" id="weather-icon">...</div>
          <div class="weather-current-details">
            <div class="weather-current-temp" id="weather-temp">--¬∞</div>
            <div class="weather-current-desc" id="weather-desc">Loading Weather</div>
          </div>
        </div>
        <div class="weather-forecast" id="weather-forecast">
          <!-- 7-day forecast will be injected here -->
        </div>
      </div>
    </section>
    <section>
      <div class="fit-screen-hight">
        <div class="grid-container">
          <div class="grid-cell grid-cell-left">LOS ANGELES</div>
          <div class="grid-cell grid-cell-right" id="time3">time3</div>
        </div>

        <div class="grid-container">
          <div class="grid-cell grid-cell-left grid-cell-longText">
            WASHINGTON DC
          </div>
          <div class="grid-cell grid-cell-right" id="time1">time1</div>
        </div>

        <div class="grid-container">
          <div class="grid-cell grid-cell-left">LONDON</div>
          <div class="grid-cell grid-cell-right" id="time2">time2</div>
        </div>

        <div class="grid-container">
          <div class="grid-cell grid-cell-left">CAIRO</div>
          <div class="grid-cell grid-cell-right" id="time4">time4</div>
        </div>

        <div class="grid-container">
          <div class="grid-cell grid-cell-left">DUBAI</div>
          <div class="grid-cell grid-cell-right" id="time5">time5</div>
        </div>

        <div class="grid-container">
          <div class="grid-cell grid-cell-left">SINGAPORE</div>
          <div class="grid-cell grid-cell-right" id="time6">time6</div>
        </div>
      </div>
    </section>

    <script>
      (function () {
        var localTz = Intl.DateTimeFormat().resolvedOptions().timeZone;
        var clocks = [
          { timeId: "time1", tz: localTz }, // Local
          { timeId: "time2", tz: "Europe/London" },
          { timeId: "time3", tz: "America/Los_Angeles" },
          { timeId: "time4", tz: "Africa/Cairo" },
          { timeId: "time5", tz: "Asia/Dubai" },
          { timeId: "time6", tz: "Asia/Singapore" },
        ];

        function updateAll() {
          var now = new Date();
          // Update local date in the second section
          var dateEl = document.getElementById("currentdatelocal");
          if (dateEl) {
            dateEl.textContent = now.toLocaleDateString([], {
              weekday: "long",
              year: "numeric",
              month: "long",
              day: "numeric",
              timeZone: localTz,
            });
          }
          for (var i = 0; i < clocks.length; i++) {
            var cfg = clocks[i];
            var timeEl = document.getElementById(cfg.timeId);
            if (timeEl) {
              timeEl.textContent = now.toLocaleTimeString([], {
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit",
                hour12: false,
                timeZone: cfg.tz,
              });
            }
          }
        }

        updateAll();
        setInterval(updateAll, 1000);
      })();

      function updateCalendar() {
        const now = new Date();
        const month = now
          .toLocaleString("default", { month: "short" })
          .toUpperCase();
        const weekday = now.toLocaleString("default", { weekday: "long" });
        const day = now.getDate();
        const year = now.getFullYear();

        const parts = [
          { id: "cal-weekday", value: weekday },
          { id: "cal-month", value: month },
          { id: "cal-day", value: day },
          { id: "cal-year", value: year },
        ];

        parts.forEach((p) => {
          const el = document.getElementById(p.id);
          if (el.textContent !== String(p.value)) {
            el.classList.add("flip");
            setTimeout(() => {
              el.textContent = p.value;
            }, 300); // halfway through the flip
            setTimeout(() => {
              el.classList.remove("flip");
            }, 600); // after animation ends
          }
        });
      }

      updateCalendar();
      // refresh every 10 s (or you can do hourly if preferred)
      setInterval(updateCalendar, 10000);

      // --- Weather Section ---
      (function() {
        const lat = 38.8951;
        const lon = -77.0364;
        const weatherURL = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&temperature_unit=fahrenheit&timezone=America%2FNew_York`;

        // Map WMO weather codes to icons and descriptions
        const weatherCodes = {
            0: { desc: "Clear sky", icon: "‚òÄÔ∏è" },
            1: { desc: "Mainly clear", icon: "üå§Ô∏è" },
            2: { desc: "Partly cloudy", icon: "‚õÖ" },
            3: { desc: "Overcast", icon: "‚òÅÔ∏è" },
            45: { desc: "Fog", icon: "üå´Ô∏è" },
            48: { desc: "Depositing rime fog", icon: "üå´Ô∏è" },
            51: { desc: "Light drizzle", icon: "üíß" },
            53: { desc: "Moderate drizzle", icon: "üíß" },
            55: { desc: "Dense drizzle", icon: "üíß" },
            61: { desc: "Slight rain", icon: "üåßÔ∏è" },
            63: { desc: "Moderate rain", icon: "üåßÔ∏è" },
            65: { desc: "Heavy rain", icon: "üåßÔ∏è" },
            66: { desc: "Light freezing rain", icon: "üßä" },
            67: { desc: "Heavy freezing rain", icon: "üßä" },
            71: { desc: "Slight snow fall", icon: "‚ùÑÔ∏è" },
            73: { desc: "Moderate snow fall", icon: "‚ùÑÔ∏è" },
            75: { desc: "Heavy snow fall", icon: "‚ùÑÔ∏è" },
            80: { desc: "Slight rain showers", icon: "üå¶Ô∏è" },
            81: { desc: "Moderate rain showers", icon: "üå¶Ô∏è" },
            82: { desc: "Violent rain showers", icon: "üå¶Ô∏è" },
            95: { desc: "Thunderstorm", icon: "‚õàÔ∏è" },
            96: { desc: "Thunderstorm, slight hail", icon: "‚õàÔ∏è" },
            99: { desc: "Thunderstorm, heavy hail", icon: "‚õàÔ∏è" },
        };

        async function fetchWeather() {
            try {
                const response = await fetch(weatherURL);
                const data = await response.json();

                // Update current weather
                const current = data.current;
                const codeInfo = weatherCodes[current.weather_code] || { desc: "Weather", icon: "üå°Ô∏è" };
                document.getElementById('weather-icon').textContent = codeInfo.icon;
                document.getElementById('weather-temp').textContent = `${Math.round(current.temperature_2m)}¬∞F`;
                document.getElementById('weather-desc').textContent = codeInfo.desc;

                // Update 7-day forecast
                const forecastContainer = document.getElementById('weather-forecast');
                forecastContainer.innerHTML = ''; // Clear previous forecast
                const daily = data.daily;

                for (let i = 0; i < 7; i++) {
                    const dayEl = document.createElement('div');
                    dayEl.className = 'forecast-day';

                    const date = new Date(daily.time[i] + 'T00:00:00'); // Ensure local timezone interpretation
                    const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                    const dayCodeInfo = weatherCodes[daily.weather_code[i]] || { icon: "üå°Ô∏è" };

                    dayEl.innerHTML = `
                        <div class="forecast-day-name">${dayName}</div>
                        <div class="forecast-icon">${dayCodeInfo.icon}</div>
                        <div class="forecast-temps">
                            <strong>${Math.round(daily.temperature_2m_max[i])}¬∞</strong> / ${Math.round(daily.temperature_2m_min[i])}¬∞
                        </div>
                    `;
                    forecastContainer.appendChild(dayEl);
                }
            } catch (error) {
                console.error("Error fetching weather:", error);
                document.getElementById('weather-desc').textContent = "Weather unavailable";
            }
        }

        fetchWeather();
        setInterval(fetchWeather, 30 * 60 * 1000); // Refresh weather every 30 minutes
      })();
    </script>
  </body>
</html>
